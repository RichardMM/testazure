{% extends "projects/base.html" %}

{% block content %}
<div class="card">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="projectDetails-tab" data-toggle="tab" href="#projectDetails" role="tab" aria-controls="details" aria-selected="true">Project Details</a>
            </li>
            {% if id!="None" %}
                <li class="nav-item">
                    <a class="nav-link" id="files-tab" data-toggle="tab" href="#files" role="tab" aria-controls="files" aria-selected="false">Files</a>
                    </li>
                <li class="nav-item">
                  <a class="nav-link" id="tasks-tab" data-toggle="tab" href="#tasks" role="tab" aria-controls="profile" aria-selected="false">Tasks</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="materials-tab" data-toggle="tab" href="#materials" role="tab" aria-controls="materials" aria-selected="false">Materials</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="Issues-tab" data-toggle="tab" href="#issues" role="tab" aria-controls="issues" aria-selected="false">Issues</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="Disbursements-tab" data-toggle="tab" href="#disbursements" role="tab" aria-controls="issues" aria-selected="false">Disbursements</a>
                </li>
            {% endif %}
        </ul>
    </div>
    <div class="card-body">
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="projectDetails" role="tabpanel" aria-labelledby="details-Tab">
                <form name="basicProjDetails" action="/postprojdetails" role="form" method="post">
                    <div class="form-group">
                        <label for="prjName">Project Name</label>
                        <input type="text" name="proj_name" class="form-control" id="prjName" value="{{ project_detail.proj_name }}">
                    </div>
                    <div class="form-group">
                        <label for="prjManager">Manager Name</label>
                        <select type="text" name="proj_manager" class="form-control" id="prjManager">
                            {% for row in managers %} 
                                <option value="{{ row.manager_code }}">{{ row.manager_name }}</option>">
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="prjType">Project Type</label>
                        <select type="text" name="" class="form-control" id="prjType">
                            {% for row in projects %} 
                                <option value="{{ row.type_id }}">{{ row.type_name }}</option>">
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class=" for="prjBudget">Budget</label>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <select class="custom-select" name="proj_currency" id="selCurrency">
                                    {% for row in curr %} 
                                        <option value="{{ row.curr_id }}">{{ row.curr_name }}</option>">
                                    {% endfor %}
                                </select>
                            </div>
                            <input type="number" name="proj_budget" class="form-control" id="prjBudget">
                          </div>
                    </div>
                    <div class="form-group">
                        <label for="prjHours">Planned Hours</label>
                        <input type="number" name="proj_hours" class="form-control" id="prjHours">
                    </div>
                    <div class="form-group">
                        <label for="prjDeadline">Deadline</label>
                        <input type="date" name="proj_deadline" class="form-control" id="prjDeadline">
                    </div>
                    <div class="form-group">
                        <label for="prjDescription">Description</label>
                        <textarea type="number" name="proj_description" class="form-control" rows="5" id="prjDescription"></textarea>
                    </div>
                    <input type="button" id="approvalButton" class="btn btn-outline-success" data_projId = "{{ id }}" value="Approve"/>
                    <input type="submit" class="btn btn-success float-right" value="Save"/>
                </form>
            </div>
        {% if id!="None" %}
            {% include "projects/projects tabs/file upload.html" %}
            {% include "projects/projects tabs/issues.html" %}
            {% include "projects/projects tabs/materials.html" %}
            {% include "projects/projects tabs/tasks.html" %}
            {% include "projects/projects tabs/disbursements.html" %}

        {% endif %}




        </div>
    </div>  
</div>
{% endblock %}
{% block morescripts %}
    <script>
        $(document).ready(function(){
            $("approvalButton").click(function(e){
                $.ajax({
                    data:{approve:"approve"},
                    url:"/approveproj/{{ id }}",
                    type:"POST"

                })
            })
        })
    </script>
{% endblock %}
